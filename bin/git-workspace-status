#!/usr/bin/env ruby

require 'pathname'

def inspect_git_repos(path)
  path.each_child do |child|
    if child.directory? && child.join('.git').exist?
        puts "\n----- #{child.basename} -----\n\n"
        system <<~EOF
        cd #{child}
        git status
        EOF
    end
  end
end

inspect_git_repos(Pathname.new('.'))